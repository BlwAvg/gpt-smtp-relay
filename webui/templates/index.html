{% extends "base.html" %}
{% block content %}
<form method="POST">
  <div class="top-right">
    <button type="submit" name="defaults">Defaults</button>
  </div>

  <div class="section">
    <h2>Prompt Template</h2>
    <textarea class="prompt" name="CHATGPT_PROMPT">{{ chatgpt_prompt }}</textarea>
  </div>

  <div class="section">
    <h2>Whitelist</h2>
    <textarea class="large" name="whitelist">{{ whitelist }}</textarea>
  </div>

  <div class="section">
    <h2>Gmail Credentials</h2>
    <label>User</label>
    <input type="text" name="GMAIL_USER" value="{{ gmail_user }}">
    <label>App Password (remove the spaces)</label>
    <input type="text" name="GMAIL_PASS" value="{{ gmail_pass }}">
  </div>

  <div class="section">
    <h2>OpenAI Settings</h2>
    <label>API Key</label>
    <input type="text" name="OPENAI_API_KEY" value="{{ openai_key }}">
    <label>Model</label>
    <input type="text" name="OPENAI_MODEL" value="{{ openai_model }}">
  </div>

  <div class="section">
    <h2>Polling Interval</h2>
    <input type="number" name="POLL_INTERVAL" value="{{ poll_interval }}">
  </div>

  <div class="section">
    <h2>Logging & Debug Options</h2>
    <label>Log Level</label>
    <select name="LOG_LEVEL">
      {% for level in ["DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"] %}
        <option value="{{ level }}" {% if log_level == level %}selected{% endif %}>{{ level }}</option>
      {% endfor %}
    </select>

    <label>SMTP Debug Level</label>
    <select name="SMTP_DEBUGLEVEL">
      {% for lvl in [0,1,2] %}
        <option value="{{ lvl }}" {% if smtp_debug == lvl %}selected{% endif %}>{{ lvl }}</option>
      {% endfor %}
    </select>

    <label>IMAP Debug Level</label>
    <select name="IMAP_DEBUGLEVEL">
      {% for lvl in [0,1,2,3,4] %}
        <option value="{{ lvl }}" {% if imap_debug == lvl %}selected{% endif %}>{{ lvl }}</option>
      {% endfor %}
    </select>
  </div>

  <div class="form-actions">
    <button type="submit" name="apply">Apply</button>
    <button type="submit" name="cancel">Cancel</button>
  </div>
</form>
{% endblock %}
